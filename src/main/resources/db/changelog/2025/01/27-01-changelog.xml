<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.31.xsd"  objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
  <changeSet id="1737974558162-1" author="fethi">
<createSequence incrementBy="1" sequenceName="book_seq" startValue="1000"/>
</changeSet>
<changeSet id="1737974558162-2" author="fethi">
<createSequence incrementBy="1" sequenceName="borrow_seq" startValue="1000"/>
</changeSet>
<changeSet id="1737974558162-3" author="fethi">
<createSequence incrementBy="1" sequenceName="user_seq" startValue="1000"/>
</changeSet>
<changeSet id="1737974558162-4" author="fethi">
<createTable tableName="book">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_book"/>
            </column>
            <column name="created_date" type="DATETIME"/>
            <column name="last_modified_date" type="DATETIME"/>
            <column name="uuid" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="author" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="is_available" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </createTable>
</changeSet>
<changeSet id="1737974558162-5" author="fethi">
<createTable tableName="borrowing">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_borrowing"/>
            </column>
            <column name="created_date" type="DATETIME"/>
            <column name="last_modified_date" type="DATETIME"/>
            <column name="uuid" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="book_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="borrow_date" type="DATETIME"/>
            <column name="return_date" type="DATETIME"/>
        </createTable>
</changeSet>
<changeSet id="1737974558162-6" author="fethi">
<createTable tableName="users">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_users"/>
            </column>
            <column name="created_date" type="DATETIME"/>
            <column name="last_modified_date" type="DATETIME"/>
            <column name="uuid" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
</changeSet>
<changeSet id="1737974558162-7" author="fethi">
<addUniqueConstraint columnNames="uuid" constraintName="uc_book_uuid" tableName="book"/>
</changeSet>
<changeSet id="1737974558162-8" author="fethi">
<addUniqueConstraint columnNames="uuid" constraintName="uc_borrowing_uuid" tableName="borrowing"/>
</changeSet>
<changeSet id="1737974558162-9" author="fethi">
<addUniqueConstraint columnNames="email" constraintName="uc_users_email" tableName="users"/>
</changeSet>
<changeSet id="1737974558162-10" author="fethi">
<addUniqueConstraint columnNames="uuid" constraintName="uc_users_uuid" tableName="users"/>
</changeSet>
<changeSet id="1737974558162-11" author="fethi">
<addForeignKeyConstraint baseColumnNames="book_id" baseTableName="borrowing" constraintName="FK_BORROWING_ON_BOOK" referencedColumnNames="id" referencedTableName="book"/>
</changeSet>
<changeSet id="1737974558162-12" author="fethi">
<addForeignKeyConstraint baseColumnNames="user_id" baseTableName="borrowing" constraintName="FK_BORROWING_ON_USER" referencedColumnNames="id" referencedTableName="users"/>
</changeSet>

</databaseChangeLog>